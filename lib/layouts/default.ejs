<!DOCTYPE html>
<html lang="en">
<head>
    <title><%= title %></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Bootstrap + reset styles-->
    <link rel="stylesheet" href="<%= assets %>/vendor/bootstrap/5.1/css/bootstrap.min.css">

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css"/>


    <!-- Highlight -->
    <link rel="stylesheet" href="<%= assets %>/vendor/highlight/css/intellij.css">
    <link rel='stylesheet' href='<%= assets %>/css/style.min.css'/>


    <!--B_system styles-->
    <link rel='stylesheet' href='<%= assets %>/css/style.min.css'/>

    <!-- Demo styles -->

    <style lang="css">
        <%- defineContent('styles') %>
    </style>
</head>
<body>

<% /*
Define a required placeholder for the header.
If a page doesn't define a header, there will be an error when rendering.
*/ %>

<!--MAIN HEADER-->
<%- header %>
<!--END: MAIN HEADER-->

<%- fixed %>

<!--MAIN CONTENT-->
<main class="main">
    <%- body %>
</main>
<!--END: MAIN CONTENT-->

<% /*
Define an optional placeholder for the footer.
If a page doesn't define a footer, this section will simply be empty.
*/ %>

<!--MAIN FOOTER-->
<%- footer %>
<!--END: MAIN FOOTER-->


<!--SCRIPTS-->

<!--Bootstrap JS Bundle-->
<script src="<%= assets %>/vendor/bootstrap/5.1/js/bootstrap.bundle.min.js"></script>

<!-- Swiper bundle CDN -->
<script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.7/beautify-html.min.js"></script>

<script>
  const options = {
    'indent_size': '4',
    'indent_char': ' ',
    'max_preserve_newlines': '5',
    'preserve_newlines': true,
    'keep_array_indentation': false,
    'break_chained_methods': false,
    'indent_scripts': 'normal',
    'brace_style': 'collapse',
    'space_before_conditional': true,
    'unescape_strings': false,
    'jslint_happy': false,
    'end_with_newline': false,
    'wrap_line_length': '0',
    'indent_inner_html': false,
    'comma_first': false,
    'e4x': false,
    'indent_empty_lines': false
  };


</script>


<!-- Highlight -->
<script src="<%= assets %>/vendor/highlight/js/highlight.js"></script>
<script>hljs.highlightAll();</script>


<!--B_system JS-->
<script src="<%= assets %>/js/bsystem.min.js"></script>

<% /* Place any scripts contained in views at the end of the page. */ %>
<script>
  let quickStart = <%- JSON.stringify({ ...QUICK_START }) %>;
  delete quickStart.ROUTE_NAME;
  delete quickStart.HOME;
  quickStart = Object.values(quickStart)
    .map((value) => {
      if (typeof value !== 'string') {
        return Object.values(value);
      }
      return value;
    })
    .flat(1);
  window.quickStart = quickStart;

  let demos = <%- JSON.stringify({ ...DEMOS }) %>
    delete demos.ROUTE_NAME;
  demos = Object.values(demos)
    .map((value) => {
      if (typeof value !== 'string') {
        return Object.values(value);
      }
      return value;
    })
    .flat(1);
  window.demos = demos;

  const transformHeader = (purchaseButtonType) => {
    const img = document.querySelector('header img.logo');
    const purchaseButton = document.querySelector('header button.btn.btn-fit');

    let isNavActive = false;
    let isHeaderTransparent = true;

    document.addEventListener(b_system.$EVENTS.ON_MOBILE_NAV_TOGGLE, (evt) => {
      const isDark = !!document.querySelector('body[data-b-system-theme="dark"]');
      const { detail: nav } = evt;
      isNavActive = nav.isActive;
      if (isNavActive) {
        if (!isDark) {
          img.src = '/assets/img/logo-dark.svg';
        }
      } else {
        if (isHeaderTransparent) {
          img.src = '/assets/img/logo-light.svg';
        }
      }
    });
    document.addEventListener(b_system.$EVENTS.ON_TRANSPARENT_HEADER_CHANGE_BACKGROUND, (evt) => {
      const { detail: header } = evt;
      const isDark = !!document.querySelector('body[data-b-system-theme="dark"]');

      isHeaderTransparent = header.isTransparent;

      if (header.isTransparent && !isNavActive) {
        img.src = '/assets/img/logo-light.svg';
        if (purchaseButtonType !== 'primary') {
          purchaseButton.classList.remove('btn-primary');
          purchaseButton.classList.add('btn-glass');
        }
      } else {

        if (!isDark) {
          img.src = '/assets/img/logo-dark.svg';
        }
        if (purchaseButtonType !== 'primary') {
          purchaseButton.classList.remove('btn-glass');
          purchaseButton.classList.add('btn-primary');
        }
      }
    });
  };
  <%- defineContent('script') %>
</script>
<!--END: SCRIPTS-->
</body>
</html>
